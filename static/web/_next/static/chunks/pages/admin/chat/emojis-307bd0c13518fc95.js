(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{62705:function(t,e,n){var o=n(55639).Symbol;t.exports=o},44239:function(t,e,n){var o=n(62705),i=n(89607),r=n(2333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):r(t)}},27561:function(t,e,n){var o=n(67990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,o(t)+1).replace(i,""):t}},31957:function(t,e,n){var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=o},89607:function(t,e,n){var o=n(62705),i=Object.prototype,r=i.hasOwnProperty,a=i.toString,u=o?o.toStringTag:void 0;t.exports=function(t){var e=r.call(t,u),n=t[u];try{t[u]=void 0;var o=!0}catch(i){}var c=a.call(t);return o&&(e?t[u]=n:delete t[u]),c}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},55639:function(t,e,n){var o=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();t.exports=r},67990:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},23279:function(t,e,n){var o=n(13218),i=n(7771),r=n(14841),a=Math.max,u=Math.min;t.exports=function(t,e,n){var c,s,l,f,d,p,m=0,v=!1,j=!1,y=!0;if("function"!=typeof t)throw TypeError("Expected a function");function g(e){var n=c,o=s;return c=s=void 0,m=e,f=t.apply(o,n)}function h(t){var n=t-p,o=t-m;return void 0===p||n>=e||n<0||j&&o>=l}function x(){var t,n,o,r=i();if(h(r))return b(r);d=setTimeout(x,(t=r-p,n=r-m,o=e-t,j?u(o,l-n):o))}function b(t){return(d=void 0,y&&c)?g(t):(c=s=void 0,f)}function w(){var t,n=i(),o=h(n);if(c=arguments,s=this,p=n,o){if(void 0===d)return m=t=p,d=setTimeout(x,e),v?g(t):f;if(j)return clearTimeout(d),d=setTimeout(x,e),g(p)}return void 0===d&&(d=setTimeout(x,e)),f}return e=r(e)||0,o(n)&&(v=!!n.leading,l=(j="maxWait"in n)?a(r(n.maxWait)||0,e):l,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),m=0,c=p=s=d=void 0},w.flush=function(){return void 0===d?f:b(i())},w}},13218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},33448:function(t,e,n){var o=n(44239),i=n(37005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==o(t)}},7771:function(t,e,n){var o=n(55639);t.exports=function(){return o.Date.now()}},14841:function(t,e,n){var o=n(27561),i=n(13218),r=n(33448),a=0/0,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var n=c.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):u.test(t)?a:+t}},10887:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(14518)}])},14518:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var o=n(85893),i=n(48689),r=n(84485),a=n(26713),u=n(71577),c=n(52206),s=n(77916),l=n(67294),f=n(39664),d=n(64777),p=n(60956),m=n(41983),v=n(90745);let{Title:j,Paragraph:y}=r.Z,g=()=>{let[t,e]=(0,l.useState)([]),[n,r]=(0,l.useState)(!1),[g,h]=(0,l.useState)(null),[x,b]=(0,l.useState)(null),w=null,k=()=>{h(null),clearTimeout(w),w=null};async function T(){r(!0);try{let t=await (0,d.rQ)("/api/emoji");e(t)}catch(n){console.error("error fetching emojis",n)}r(!1)}async function E(t){let e="/".concat(t.split("/").slice(3).join("/"));console.log(e),r(!0),h((0,m.kg)(m.Jk,"Deleting emoji..."));try{let n=await (0,d.rQ)(d.Ff,{method:"POST",data:{name:e}});if(n instanceof Error)throw n;h((0,m.kg)(m.zv,"Emoji deleted")),w=setTimeout(k,v.sI)}catch(o){h((0,m.kg)(m.Un,"".concat(o))),r(!1),w=setTimeout(k,v.sI)}T()}async function O(){r(!0);try{h((0,m.kg)(m.Jk,"Converting emoji..."));let t=await new Promise((t,e)=>{if(!p.d.includes(x.type)){let n="File type is not supported: ".concat(x.type);return e(n)}(0,p.y)(x,e=>t({name:x.name,url:e}))});h((0,m.kg)(m.Jk,"Uploading emoji..."));let e=await (0,d.rQ)(d.Qc,{method:"POST",data:{name:t.name,data:t.url}});if(e instanceof Error)throw e;h((0,m.kg)(m.zv,"Emoji uploaded successfully!")),T()}catch(n){h((0,m.kg)(m.Un,"".concat(n)))}w=setTimeout(k,v.sI),r(!1)}return(0,l.useEffect)(()=>{T()},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(j,{children:"Emojis"}),(0,o.jsx)(y,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,o.jsx)(c.Z,{rowKey:t=>t.url,dataSource:t,columns:[{title:"",key:"delete",render:(t,e)=>(0,o.jsx)(a.Z,{size:"middle",children:(0,o.jsx)(u.Z,{onClick:()=>E(e.url),icon:(0,o.jsx)(i.Z,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(t,e)=>(0,o.jsx)("img",{src:e.url,alt:e.name,style:{maxWidth:"2vw"}})}],pagination:!1}),(0,o.jsx)("br",{}),(0,o.jsx)(s.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:p.d.join(","),beforeUpload:b,customRequest:O,disabled:n,children:(0,o.jsx)(u.Z,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,o.jsx)(f.Z,{status:g})]})};var h=g},60956:function(t,e,n){"use strict";n.d(e,{d:function(){return o},y:function(){return i}});let o=["image/png","image/jpeg","image/gif"];function i(t,e){let n=new FileReader;n.addEventListener("load",()=>e(n.result)),n.readAsDataURL(t)}}},function(t){t.O(0,[4485,8909,3903,4267,2206,7910,7916,9774,2888,179],function(){return t(t.s=10887)}),_N_E=t.O()}]);